(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{383:function(t,e,a){"use strict";a.r(e);var r=a(7),n=Object(r.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"raft算法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#raft算法"}},[t._v("#")]),t._v(" Raft算法")]),t._v(" "),e("p",[t._v("解决分布式消息一致性问题，例如zookeeper")]),t._v(" "),e("h2",{attrs:{id:"原理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[t._v("#")]),t._v(" 原理")]),t._v(" "),e("p",[t._v("每个节点有三种状态：候选人candidate，领导者leader，跟随者状态follower")]),t._v(" "),e("p",[t._v("如果跟随者没有跟随一个领导者则成为候选人")]),t._v(" "),e("p",[t._v("候选人将接收其他节点的投票，如果获得票最多将称为领导者")]),t._v(" "),e("p",[t._v("所有对于系统的改变都要通过领导者同意，每一个改变的添加都将作为log的一个条目加入到节点，此时条目没有提交所以值不会更新，领导者复制条目到每一个跟随者节点，等待大多数节点都传回了写入信息后，条目提交此时改变生效，领导者通知所有跟随者改变生效（跟随者条目提交），这个集群此时状态一致。这个程序称为log复制")]),t._v(" "),e("p",[t._v("领导者选举")]),t._v(" "),e("p",[t._v("在Raft中，有两个控制选举的超时设置。选举超时是跟随者等待的时间过长（约150-300ms）从而变为候选人，开始新的投票，它向其他节点发出投票需求，如果接收的节点还没有投票那么它会投票给这个节点，这个节点会重置选举超时，当候选人有大多数投票，它将称为领导者，发送信息（append entries）向所有跟随者，这个信息是周期性发送的，即心跳超时，跟随者也会回应每一个append entries，每次跟随着接收append entries都会重置选举超时。如果两个节点同时成为候选人则可能发生分裂投票，那么会等待重新开始下一轮投票，最终将选出一个领导者")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/32052223",target:"_blank",rel:"noopener noreferrer"}},[t._v("Raft算法详解"),e("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=n.exports}}]);