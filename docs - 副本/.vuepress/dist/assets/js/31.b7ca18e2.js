(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{399:function(v,_,a){"use strict";a.r(_);var t=a(7),s=Object(t.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h1",{attrs:{id:"memcached"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#memcached"}},[v._v("#")]),v._v(" memcached")]),v._v(" "),_("p",[v._v("开源的、高性能、具有分布式内存对象的缓存系统，")]),v._v(" "),_("ul",[_("li",[v._v("kv缓存")]),v._v(" "),_("li",[v._v("协议简单")]),v._v(" "),_("li",[v._v("不持久化")]),v._v(" "),_("li",[v._v("没有安全机制")]),v._v(" "),_("li",[v._v("互不通信的memcached有分布式特征")])]),v._v(" "),_("h1",{attrs:{id:"三大范式"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#三大范式"}},[v._v("#")]),v._v(" 三大范式")]),v._v(" "),_("h2",{attrs:{id:"意义"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#意义"}},[v._v("#")]),v._v(" 意义")]),v._v(" "),_("p",[v._v("避免数据冗余、")]),v._v(" "),_("p",[v._v("提高查询和更新效率：数据冗余使得更新某个数据需要修改多行数据（例如某课程的学分），如果分表了只需修改一行")]),v._v(" "),_("p",[v._v("数据一致性、完整性：更新某个数据需要修改多个学生的信息，那么修改的过程中会出现有些学生查到的是新的，有些学生查到的是旧的")]),v._v(" "),_("h2",{attrs:{id:"原理"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[v._v("#")]),v._v(" 原理")]),v._v(" "),_("h3",{attrs:{id:"第一范式-1nf-原子性"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#第一范式-1nf-原子性"}},[v._v("#")]),v._v(" 第一范式（1NF）原子性：")]),v._v(" "),_("p",[v._v("表中每一列信息都不可再分")]),v._v(" "),_("h3",{attrs:{id:"第二范式-2nf-唯一性"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#第二范式-2nf-唯一性"}},[v._v("#")]),v._v(" 第二范式（2NF）唯一性：")]),v._v(" "),_("p",[v._v("通过一个主键字段或者一个联合主键字段可以唯一确定一行，且表中其他非主键字段一定完全依赖所有主键字段，而不是部分依赖")]),v._v(" "),_("p",[v._v("例如："),_("img",{attrs:{src:"/%E6%95%B0%E6%8D%AE%E5%BA%93/./image-20241029160023462.png",alt:"image-20241029160023462"}})]),v._v(" "),_("p",[v._v("对于这个表，通过学生和课程可以唯一确定一行，联合主键索引（学生、课程）。但学分依赖于课程，不依赖学生。成绩依赖学生不依赖课程，因此不满足第二范式。")]),v._v(" "),_("p",[v._v("分表修改如下")]),v._v(" "),_("p",[_("img",{attrs:{src:"/%E6%95%B0%E6%8D%AE%E5%BA%93/./image-20241029160316958.png",alt:"image-20241029160316958"}})]),v._v(" "),_("h3",{attrs:{id:"第三范式-3nf-独立性"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#第三范式-3nf-独立性"}},[v._v("#")]),v._v(" 第三范式（3NF）独立性：")]),v._v(" "),_("p",[v._v("对于非主键索引之间，不能有依赖性")]),v._v(" "),_("p",[v._v("例如："),_("img",{attrs:{src:"/%E6%95%B0%E6%8D%AE%E5%BA%93/./image-20241029160545368.png",alt:"image-20241029160545368"}})]),v._v(" "),_("p",[v._v("表中学生id作为主键唯一确定一行，满足第一范式和第二范式，但非主键中院系电话依赖于院系，因此不满足第三范式")]),v._v(" "),_("p",[v._v("修改如下：")]),v._v(" "),_("p",[_("img",{attrs:{src:"/%E6%95%B0%E6%8D%AE%E5%BA%93/./image-20241029160812364.png",alt:"image-20241029160812364"}})]),v._v(" "),_("h1",{attrs:{id:"分库分表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#分库分表"}},[v._v("#")]),v._v(" 分库分表")]),v._v(" "),_("p",[v._v("分库：单一数据库的连接量，读写性能达上限，需要分库")]),v._v(" "),_("p",[v._v("分表：")]),v._v(" "),_("ul",[_("li",[v._v("数据量过大，超过三层b+树索引，")])]),v._v(" "),_("h2",{attrs:{id:"垂直分库"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#垂直分库"}},[v._v("#")]),v._v(" 垂直分库")]),v._v(" "),_("p",[v._v("将一个库的表按照业务类型拆分到多个库，每个库的表不一样")]),v._v(" "),_("ul",[_("li",[v._v("降低单库压力")]),v._v(" "),_("li",[v._v("各系统间解耦")])]),v._v(" "),_("p",[v._v("需要考虑数据一致性，引入分布式事务")]),v._v(" "),_("p",[v._v("跨库多表join问题：")]),v._v(" "),_("ul",[_("li",[v._v("需要join的字典不拆表")]),v._v(" "),_("li",[v._v("对join字段冗余")])]),v._v(" "),_("h2",{attrs:{id:"垂直分表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#垂直分表"}},[v._v("#")]),v._v(" 垂直分表")]),v._v(" "),_("p",[v._v("拆分表结构，按照范式原则拆分一个表为多个子表")]),v._v(" "),_("ul",[_("li",[v._v("提高缓存命中率，（数据库以行为单位缓存数据，拆分后可以只缓存访问频率高的字段，从而能缓存更多数据）")]),v._v(" "),_("li",[v._v("提高查询更新效率")]),v._v(" "),_("li",[v._v("降低数据冗余")]),v._v(" "),_("li",[v._v("保证数据一致性")])]),v._v(" "),_("h2",{attrs:{id:"水平分库"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#水平分库"}},[v._v("#")]),v._v(" 水平分库")]),v._v(" "),_("p",[v._v("用哈希映射，将不同数据映射到不同库，从而支持大规模数据存储")]),v._v(" "),_("ul",[_("li",[v._v("提高集群并发能力")])]),v._v(" "),_("p",[v._v("单库的自增ID需要引入分布式自增ID")]),v._v(" "),_("h2",{attrs:{id:"水平分表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#水平分表"}},[v._v("#")]),v._v(" 水平分表")]),v._v(" "),_("p",[v._v("同一库内，将单表按数据拆分为多个表")]),v._v(" "),_("ul",[_("li",[v._v("降低单表数据量，降低b+树高度，提高查询速度")]),v._v(" "),_("li")])])}),[],!1,null,null,null);_.default=s.exports}}]);